<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ðŸ”¥ Rizz System â€” Version 1 (Phase A)</title>

<style>
:root{
  --bg:#ffffff;
  --card:#f5f6f7;
  --muted:#6b7280;
  --accent:#00bfa6;
  --danger:#ff6b6b;
  --text:#111827;
}
html,body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
}
.wrap{
  max-width:760px;
  margin:auto;
  padding:16px;
}
h1{
  font-size:26px;
  margin-bottom:12px;
}
.controls,.actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:10px;
}
input{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid #ddd;
}
button{
  padding:8px 12px;
  border-radius:10px;
  border:1px solid #ddd;
  background:#fff;
}
.card{
  background:var(--card);
  padding:12px;
  border-radius:12px;
  margin-top:12px;
}
.bar{
  height:12px;
  background:#e5e7eb;
  border-radius:8px;
  overflow:hidden;
}
.bar-inner{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--accent),#06a88f);
  transition:width .3s;
}
.list{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.person{
  background:#fff;
  border:1px solid #eee;
  padding:10px;
  border-radius:10px;
  display:flex;
  gap:10px;
  align-items:center;
}
.person.paused{opacity:.45}
.name{font-weight:600;min-width:80px}
.score{font-weight:700}
.small-bar{
  width:100px;height:8px;background:#eef2f4;border-radius:6px;overflow:hidden;
}
.small-inner{
  height:100%;background:linear-gradient(90deg,var(--accent),#06a88f);
}
.right{
  margin-left:auto;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.focus{background:#d1fae5;border:none}
.danger{background:var(--danger);color:#fff;border:none}
.muted{color:var(--muted);font-size:13px;margin-top:8px}
</style>
</head>

<body>
<div class="wrap">
<h1>ðŸ”¥ Rizz System â€” Version 1 (Phase A)</h1>

<div class="controls">
  <input id="nameInput" placeholder="Add name (e.g. Charity)">
  <button id="addBtn">Add / Update</button>
  <button id="decayBtn">Run Decay</button>
</div>

<div class="controls">
  <button id="pauseAll">Pause All</button>
  <button id="resumeAll">Resume All</button>
</div>

<div class="card">
  <strong>Phase â€” <span id="phase">0%</span></strong>
  <div class="bar"><div id="phaseBar" class="bar-inner"></div></div>
</div>

<div class="actions">
  <button id="minus">âˆ’10</button>
  <button id="plus">+10</button>
  <button id="focusToggle">Focus / Unfocus</button>
  <button id="deleteFocused" class="danger">Delete Focused</button>
</div>

<div id="list" class="list"></div>

<div id="status" class="muted">Ready</div>
</div>

<script>
/* ===== RIZZ SYSTEM CORE ===== */

const STORAGE_KEY = "rizz_v1_single";
const FOCUS_LIMIT = 2;

let people = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");

const $ = id => document.getElementById(id);
const uid = () => Date.now()+"_"+Math.random().toString(36).slice(2,6);

function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(people)); }

function render(){
  const list = $("list");
  list.innerHTML = "";

  let avg = people.length
    ? Math.round(people.reduce((s,p)=>s+p.score,0)/people.length)
    : 0;

  $("phase").textContent = avg+"%";
  $("phaseBar").style.width = avg+"%";

  people.forEach(p=>{
    const row = document.createElement("div");
    row.className = "person"+(p.active?"":" paused");

    const name = document.createElement("div");
    name.className="name"; name.textContent=p.name;

    const score = document.createElement("div");
    score.className="score"; score.textContent=p.score+"%";

    const sb = document.createElement("div");
    sb.className="small-bar";
    const si = document.createElement("div");
    si.className="small-inner"; si.style.width=p.score+"%";
    sb.appendChild(si);

    const right = document.createElement("div");
    right.className="right";

    const plus = btn("+10",()=>change(p.id,10));
    const minus = btn("-10",()=>change(p.id,-10));
    const focus = btn(p.focused?"Unfocus":"Focus",()=>toggleFocus(p.id),"focus");
    const pause = btn(p.active?"Pause":"Activate",()=>toggleActive(p.id));
    const del = btn("Delete",()=>delOne(p.id),"danger");

    right.append(plus,minus,focus,pause,del);
    row.append(name,score,sb,right);
    list.appendChild(row);
  });

  save();
}

function btn(txt,fn,cls){
  const b=document.createElement("button");
  b.textContent=txt;
  if(cls) b.classList.add(cls);
  b.onclick=fn;
  return b;
}

function add(){
  const n=$("nameInput").value.trim();
  if(!n) return;
  let p=people.find(x=>x.name.toLowerCase()===n.toLowerCase());
  if(p) p.score=Math.min(100,p.score+10);
  else people.push({id:uid(),name:n,score:30,focused:false,active:true});
  $("nameInput").value="";
  render();
}

function change(id,val){
  const p=people.find(x=>x.id===id);
  if(!p||!p.active) return;
  p.score=Math.max(0,Math.min(100,p.score+val));
  render();
}

function toggleFocus(id){
  const p=people.find(x=>x.id===id);
  if(!p||!p.active) return;
  if(!p.focused){
    const f=people.filter(x=>x.focused);
    if(f.length>=FOCUS_LIMIT) f[0].focused=false;
    p.focused=true;
  }else p.focused=false;
  render();
}

function toggleActive(id){
  const p=people.find(x=>x.id===id);
  p.active=!p.active;
  if(!p.active) p.focused=false;
  render();
}

function delOne(id){ people=people.filter(p=>p.id!==id); render(); }

function pauseAll(){ people.forEach(p=>{p.active=false;p.focused=false}); render(); }
function resumeAll(){ people.forEach(p=>p.active=true); render(); }

function decay(){
  people.forEach(p=>{ if(p.active) p.score=Math.max(0,p.score-10); });
  render();
}

$("addBtn").onclick=add;
$("pauseAll").onclick=pauseAll;
$("resumeAll").onclick=resumeAll;
$("decayBtn").onclick=decay;
$("minus").onclick=()=>people.forEach(p=>p.focused&&p.active&&(p.score=Math.max(0,p.score-10)))||render();
$("plus").onclick=()=>people.forEach(p=>p.focused&&p.active&&(p.score=Math.min(100,p.score+10)))||render();
$("focusToggle").onclick=()=>people.forEach(p=>p.focused=!p.focused)||render();
$("deleteFocused").onclick=()=>{people=people.filter(p=>!p.focused);render()};

render();
</script>
</body>
</html>
