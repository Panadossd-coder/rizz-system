<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Rizz System Dashboard</title>

<style>
body {
  background: #000;
  color: #fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  padding: 20px;
}
h1 { font-size: 28px; }
input, button {
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin-right: 6px;
}
button { cursor: pointer; }
.progress {
  width: 100%;
  background: #222;
  border-radius: 10px;
  height: 14px;
  margin: 8px 0;
}
.fill {
  height: 100%;
  border-radius: 10px;
  background: #00ff99;
}
.card {
  margin: 20px 0;
}
.badge {
  padding: 4px 8px;
  border-radius: 6px;
  margin-left: 8px;
  font-size: 12px;
}
.focus { background: #00ff99; color:#000; }
.active { background:#333; }
.pause { background:#555; }
.controls button {
  margin: 4px 4px 0 0;
}
</style>
</head>

<body>
<h1>ðŸ”¥ Rizz System Dashboard</h1>

<input id="nameInput" placeholder="Enter name (e.g. Charity)" />
<button onclick="addPerson()">Add / Update</button>

<div id="list"></div>

<script>
const STORAGE_KEY = "rizzSystemData";

function loadData() {
  let raw = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");

  // ðŸ”¥ HARD CLEAN: remove invalid keys
  let clean = {};
  Object.keys(raw).forEach(k => {
    if (typeof k === "string" && isNaN(k) && raw[k]?.name) {
      clean[k] = raw[k];
    }
  });

  localStorage.setItem(STORAGE_KEY, JSON.stringify(clean));
  return clean;
}

function saveData(data) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

function addPerson() {
  const name = document.getElementById("nameInput").value.trim();
  if (!name) return;

  const data = loadData();
  if (!data[name]) {
    data[name] = { name, score: 0, status: "Active" };
  }
  saveData(data);
  document.getElementById("nameInput").value = "";
  render();
}

function updateScore(name, delta) {
  const data = loadData();
  data[name].score = Math.max(0, Math.min(100, data[name].score + delta));
  saveData(data);
  render();
}

function setStatus(name, status) {
  const data = loadData();
  data[name].status = status;
  saveData(data);
  render();
}

function removePerson(name) {
  const data = loadData();
  delete data[name];
  saveData(data);
  render();
}

function render() {
  const data = loadData();
  const list = document.getElementById("list");
  list.innerHTML = "";

  Object.values(data).forEach(p => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <strong>${p.name} â€” ${p.score}%</strong>
      <span class="badge ${p.status.toLowerCase()}">${p.status}</span>

      <div class="progress">
        <div class="fill" style="width:${p.score}%"></div>
      </div>

      <div class="controls">
        <button onclick="updateScore('${p.name}', -10)">-10</button>
        <button onclick="updateScore('${p.name}', 10)">+10</button>
        <button onclick="setStatus('${p.name}','Focus')">Focus</button>
        <button onclick="setStatus('${p.name}','Pause')">Pause</button>
        <button onclick="setStatus('${p.name}','Active')">Active</button>
        <button onclick="removePerson('${p.name}')">Delete</button>
      </div>
    `;
    list.appendChild(div);
  });
}

render();
</script>
</body>
</html>